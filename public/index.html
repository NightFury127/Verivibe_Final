<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeriVibe</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6e8efb, #a777e3);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
            transition: background 0.5s;
        }

        body.dark-mode {
            background: linear-gradient(135deg, #2c3e50, #34495e);
        }

        canvas#particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            padding: 40px;
            max-width: 700px;
            width: 100%;
            animation: fadeIn 1s ease-in;
            position: relative;
        }

        .dark-mode .container {
            background: rgba(44, 62, 80, 0.95);
            color: #ecf0f1;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        h1 {
            text-align: center;
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 2.2em;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        .dark-mode h1 {
            color: #ecf0f1;
        }

        .theme-toggle {
            position: absolute;
            top: 20px;
            right: 20px;
            background: none;
            border: none;
            cursor: pointer;
            font-size: 20px;
        }

        .about-section {
            background: #f8f9fa;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 25px;
            font-size: 15px;
            color: #34495e;
            line-height: 1.7;
            border-left: 5px solid #6e8efb;
        }

        .dark-mode .about-section {
            background: #34495e;
            color: #ecf0f1;
        }

        .about-section h2 {
            font-size: 20px;
            color: #2c3e50;
            margin-bottom: 12px;
        }

        .dark-mode .about-section h2 {
            color: #ecf0f1;
        }

        .input-section {
            margin-bottom: 25px;
            position: relative;
        }

        .input-wrapper {
            position: relative;
        }

        textarea {
            width: 100%;
            height: 180px;
            padding: 15px;
            border: 2px solid #dfe6e9;
            border-radius: 8px;
            resize: vertical;
            font-size: 15px;
            transition: border-color 0.3s, box-shadow 0.3s;
        }

        .dark-mode textarea {
            background: #34495e;
            color: #ecf0f1;
            border-color: #2c3e50;
        }

        textarea:focus {
            outline: none;
            border-color: #6e8efb;
            box-shadow: 0 0 8px rgba(110, 142, 251, 0.3);
        }

        .input-tools {
            position: absolute;
            bottom: 12px;
            right: 12px;
            display: flex;
            gap: 10px;
        }

        .tool-btn {
            background: linear-gradient(45deg, rgba(255, 255, 255, 0.2), rgba(255, 255, 255, 0.1));
            backdrop-filter: blur(5px);
            color: #fff;
            padding: 8px;
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            cursor: pointer;
            font-size: 16px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.3s, box-shadow 0.3s, background 0.3s;
            text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
        }

        .file-btn {
            background: linear-gradient(45deg, #00c6ff, #0072ff);
        }

        .mic-btn {
            background: linear-gradient(45deg, #ff7e5f, #feb47b);
        }

        .tool-btn:hover {
            transform: scale(1.1);
            box-shadow: 0 0 12px rgba(255, 255, 255, 0.5);
        }

        .tool-btn:active {
            transform: scale(0.95);
        }

        .file-btn input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            cursor: pointer;
        }

        .mic-btn.recording {
            background: linear-gradient(45deg, #ff3e3e, #ff6b6b);
            animation: pulse 1.2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 99, 71, 0.7); }
            50% { transform: scale(1.15); box-shadow: 0 0 0 10px rgba(255, 99, 71, 0); }
            100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(255, 99, 71, 0); }
        }

        .dark-mode .tool-btn {
            background: linear-gradient(45deg, rgba(44, 62, 80, 0.3), rgba(44, 62, 80, 0.2));
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .dark-mode .file-btn {
            background: linear-gradient(45deg, #1e90ff, #00b7eb);
        }

        .dark-mode .mic-btn {
            background: linear-gradient(45deg, #ff6b6b, #ff8e53);
        }

        .dark-mode .mic-btn.recording {
            background: linear-gradient(45deg, #e63946, #ff6b6b);
        }

        .word-count {
            position: absolute;
            bottom: 12px;
            left: 15px;
            font-size: 12px;
            color: #7f8c8d;
        }

        .dark-mode .word-count {
            color: #bdc3c7;
        }

        .file-preview-area {
            margin-top: 10px;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }

        .file-preview {
            max-width: 100%;
            max-height: 80px;
            border-radius: 5px;
            display: none;
            margin-top: 5px;
        }

        .file-info {
            font-size: 12px;
            color: #7f8c8d;
            margin-top: 5px;
            word-break: break-all;
        }

        .dark-mode .file-info {
            color: #bdc3c7;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        button {
            background: linear-gradient(45deg, #6e8efb, #a777e3);
            color: white;
            padding: 15px 25px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            text-transform: uppercase;
            letter-spacing: 1px;
            transition: transform 0.3s, box-shadow 0.3s;
            position: relative;
            overflow: hidden;
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(110, 142, 251, 0.4);
        }

        button::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        button:hover::after {
            width: 200px;
            height: 200px;
        }

        .clear-btn {
            background: linear-gradient(45deg, #e74c3c, #c0392b);
        }

        .tooltip {
            position: relative;
        }

        .tooltip::before {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: #2c3e50;
            color: white;
            padding: 5px 10px;
            border-radius: 4px;
            font-size: 12px;
            white-space: nowrap;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s, visibility 0.3s;
        }

        .tooltip:hover::before {
            opacity: 1;
            visibility: visible;
        }

        .result-section {
            margin-top: 25px;
            padding: 20px;
            border-radius: 8px;
            display: none;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }

        .result-fake {
            background: #fff1f1;
            color: #c0392b;
            border-left: 5px solid #c0392b;
        }

        .result-real {
            background: #e7f7e7;
            color: #27ae60;
            border-left: 5px solid #27ae60;
        }

        .dark-mode .result-fake {
            background: #4b2422;
        }

        .dark-mode .result-real {
            background: #224b2e;
        }

        .result-text {
            font-size: 16px;
            font-weight: 500;
        }

        .confidence-meter {
            margin-top: 15px;
            height: 10px;
            background: #ecf0f1;
            border-radius: 5px;
            overflow: hidden;
        }

        .dark-mode .confidence-meter {
            background: #34495e;
        }

        .confidence-bar {
            height: 100%;
            background: linear-gradient(45deg, #6e8efb, #a777e3);
            transition: width 1s ease-in-out;
        }

        .loading {
            display: none;
            text-align: center;
            margin-top: 20px;
        }

        .loading::after {
            content: "";
            display: inline-block;
            width: 24px;
            height: 24px;
            border: 3px solid #6e8efb;
            border-radius: 50%;
            border-top-color: transparent;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .history {
            margin-top: 20px;
            max-height: 200px;
            overflow-y: auto;
            padding: 10px;
            background: #f8f9fa;
            border-radius: 8px;
            display: none;
        }

        .dark-mode .history {
            background: #34495e;
        }

        .history-item {
            padding: 8px;
            border-bottom: 1px solid #eee;
            font-size: 14px;
            color: #34495e;
            transition: background 0.3s;
        }

        .dark-mode .history-item {
            color: #ecf0f1;
            border-bottom: 1px solid #2c3e50;
        }

        .history-item:hover {
            background: #ecf0f1;
        }

        .dark-mode .history-item:hover {
            background: #2c3e50;
        }

        .history-item:last-child {
            border-bottom: none;
        }

        @media (max-width: 480px) {
            .container {
                padding: 25px;
            }

            h1 {
                font-size: 1.8em;
            }

            textarea {
                height: 140px;
            }

            .tool-btn {
                width: 32px;
                height: 32px;
                font-size: 14px;
            }

            button {
                padding: 12px;
            }

            .about-section {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <canvas id="particles"></canvas>
    <div class="container">
        <button class="theme-toggle" onclick="toggleTheme()" data-tooltip="Toggle Dark/Light Mode" aria-label="Toggle dark mode">ðŸŒ™</button>
        <h1>VeriVibe</h1>
        <div class="about-section" role="region" aria-label="About this application">
            <h2>About This App</h2>
            <p>Discover the truth with Fake News Detector! Type, paste, upload a file (image, video, or document), or use voice input to analyze content for misinformation. Enjoy real-time analysis, confidence meters, history tracking, and dark/light modes. Stay informed and combat fake news effortlessly. Note: This is a simulation; always cross-check with trusted sources.</p>
        </div>
        <div class="input-section" role="region" aria-label="Input area">
            <div class="input-wrapper">
                <textarea id="newsInput" placeholder="Type, paste, or use voice input for news text..." oninput="updateWordCount()" aria-label="News text input"></textarea>
                <span class="word-count" id="wordCount" aria-live="polite">0 words</span>
                <div class="input-tools">
                    <div class="file-btn tool-btn tooltip" data-tooltip="Upload File" role="button" tabindex="0" aria-label="Upload file">
                        <input type="file" id="fileInput" accept="image/*,video/*,*/*" onchange="handleFileUpload()" aria-label="File upload">
                        ðŸ“Ž
                    </div>
                    <button class="mic-btn tool-btn tooltip" id="micBtn" onclick="toggleSpeechRecognition()" data-tooltip="Start/Stop Voice Input" aria-label="Toggle voice input">
                        ðŸŽ¤
                    </button>
                </div>
            </div>
            <div class="file-preview-area" role="region" aria-label="File preview">
                <img id="filePreview" class="file-preview" alt="File Preview" aria-hidden="true">
                <video id="videoPreview" class="file-preview" controls aria-label="Video preview"></video>
                <span id="fileInfo" class="file-info" aria-live="polite"></span>
            </div>
        </div>
        <div class="action-buttons">
            <button class="analyze-btn tooltip" onclick="checkNews()" data-tooltip="Analyze the text or file" aria-label="Analyze news">Analyze News</button>
            <button class="clear-btn tooltip" onclick="clearInput()" data-tooltip="Clear all inputs" aria-label="Clear inputs">Clear</button>
        </div>
        <div class="loading" id="loading" role="status" aria-live="polite">Checking...</div>
        <div class="result-section" id="resultSection" role="region" aria-label="Analysis results">
            <p class="result-text" id="resultText" aria-live="polite"></p>
            <div class="confidence-meter" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0">
                <div class="confidence-bar" id="confidenceBar"></div>
            </div>
        </div>
        <div class="history" id="history" role="region" aria-label="Analysis history">
            <h3>Recent Checks</h3>
            <div id="historyList"></div>
        </div>
    </div>

    <script>
        let analysisHistory = [];
        let recognition = null;
        let isRecording = false;

        // Particle Background
        const canvas = document.getElementById('particles');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const particlesArray = [];
        const numberOfParticles = 100;

        class Particle {
            constructor() {
                this.x = Math.random() * canvas.width;
                this.y = Math.random() * canvas.height;
                this.size = Math.random() * 3 + 1;
                this.speedX = Math.random() * 2 - 1;
                this.speedY = Math.random() * 2 - 1;
                this.opacity = 0.8;
            }

            update() {
                this.x += this.speedX;
                this.y += this.speedY;
                if (this.size > 0.2) this.size -= 0.05;
                if (this.opacity > 0.1) this.opacity -= 0.01;

                if (this.x < 0 || this.x > canvas.width) this.speedX *= -1;
                if (this.y < 0 || this.y > canvas.height) this.speedY *= -1;
            }

            draw() {
                ctx.fillStyle = `rgba(255, 255, 255, ${this.opacity})`;
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fill();
            }
        }

        function initParticles() {
            for (let i = 0; i < numberOfParticles; i++) {
                particlesArray.push(new Particle());
            }
        }

        function animateParticles() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            for (let i = 0; i < particlesArray.length; i++) {
                particlesArray[i].update();
                particlesArray[i].draw();
                if (particlesArray[i].size <= 0.2 || particlesArray[i].opacity <= 0.1) {
                    particlesArray.splice(i, 1);
                    i--;
                    particlesArray.push(new Particle());
                }
            }
            requestAnimationFrame(animateParticles);
        }

        initParticles();
        animateParticles();

        // Throttle resize event
        let resizeTimeout;
        window.addEventListener('resize', () => {
            clearTimeout(resizeTimeout);
            resizeTimeout = setTimeout(() => {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }, 250);
        });

        // Theme Toggle
        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const themeToggle = document.querySelector('.theme-toggle');
            themeToggle.textContent = document.body.classList.contains('dark-mode') ? 'â˜€ï¸' : 'ðŸŒ™';
        }

        // File Upload Handling
        function handleFileUpload() {
            const fileInput = document.getElementById('fileInput');
            const filePreview = document.getElementById('filePreview');
            const videoPreview = document.getElementById('videoPreview');
            const fileInfo = document.getElementById('fileInfo');
            const file = fileInput.files[0];

            filePreview.style.display = 'none';
            videoPreview.style.display = 'none';
            fileInfo.textContent = '';

            if (file) {
                // File size validation (10MB limit)
                const maxSize = 10 * 1024 * 1024; // 10MB
                if (file.size > maxSize) {
                    alert('File size exceeds 10MB limit. Please choose a smaller file.');
                    fileInput.value = '';
                    return;
                }

                // File type validation
                const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'video/mp4', 'video/webm', 'text/plain', 'application/pdf'];
                if (!allowedTypes.includes(file.type)) {
                    alert('File type not supported. Please upload an image, video, text, or PDF file.');
                    fileInput.value = '';
                    return;
                }

                fileInfo.textContent = `File: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
                
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = () => {
                        filePreview.src = reader.result;
                        filePreview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else if (file.type.startsWith('video/')) {
                    const reader = new FileReader();
                    reader.onload = () => {
                        videoPreview.src = reader.result;
                        videoPreview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else {
                    fileInfo.textContent += ' (File uploaded, ready for analysis)';
                }
            }
        }

        // Speech Recognition
        function toggleSpeechRecognition() {
            const micBtn = document.getElementById('micBtn');
            const newsInput = document.getElementById('newsInput');

            // Check for SpeechRecognition support
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            if (!SpeechRecognition) {
                alert('Speech recognition is not supported in your browser. Please use Chrome or another compatible browser.');
                return;
            }

            if (!recognition) {
                recognition = new SpeechRecognition();
                recognition.continuous = true;
                recognition.interimResults = true;
                recognition.lang = 'en-US';

                recognition.onstart = () => {
                    micBtn.classList.add('recording');
                    micBtn.textContent = 'ðŸŽ¤';
                    isRecording = true;
                };

                recognition.onresult = (event) => {
                    let interimTranscript = '';
                    let finalTranscript = '';

                    for (let i = event.resultIndex; i < event.results.length; i++) {
                        const transcript = event.results[i][0].transcript;
                        if (event.results[i].isFinal) {
                            finalTranscript += transcript + ' ';
                        } else {
                            interimTranscript += transcript;
                        }
                    }

                    newsInput.value = finalTranscript + interimTranscript;
                    updateWordCount();
                };

                recognition.onerror = (event) => {
                    let errorMessage = '';
                    switch (event.error) {
                        case 'no-speech':
                            errorMessage = 'No speech detected. Please try again.';
                            break;
                        case 'audio-capture':
                            errorMessage = 'Microphone not detected. Please check your audio input.';
                            break;
                        case 'not-allowed':
                            errorMessage = 'Microphone access denied. Please allow microphone permissions.';
                            break;
                        default:
                            errorMessage = `Speech recognition error: ${event.error}`;
                    }
                    alert(errorMessage);
                    stopSpeechRecognition();
                };

                recognition.onend = () => {
                    stopSpeechRecognition();
                };
            }

            if (isRecording) {
                recognition.stop();
            } else {
                try {
                    recognition.start();
                } catch (e) {
                    if (e.name === 'InvalidStateError') {
                        alert('Speech recognition is already active or microphone is in use.');
                    }
                }
            }
        }

        function stopSpeechRecognition() {
            const micBtn = document.getElementById('micBtn');
            if (recognition) {
                recognition.stop();
                recognition = null; // Clean up the recognition instance
            }
            micBtn.classList.remove('recording');
            micBtn.textContent = 'ðŸŽ¤';
            isRecording = false;
        }

        // Improved file upload handling with validation
        function handleFileUpload() {
            const fileInput = document.getElementById('fileInput');
            const filePreview = document.getElementById('filePreview');
            const videoPreview = document.getElementById('videoPreview');
            const fileInfo = document.getElementById('fileInfo');
            const file = fileInput.files[0];

            filePreview.style.display = 'none';
            videoPreview.style.display = 'none';
            fileInfo.textContent = '';

            if (file) {
                // File size validation (10MB limit)
                const maxSize = 10 * 1024 * 1024; // 10MB
                if (file.size > maxSize) {
                    alert('File size exceeds 10MB limit. Please choose a smaller file.');
                    fileInput.value = '';
                    return;
                }

                // File type validation
                const allowedTypes = ['image/jpeg', 'image/png', 'image/gif', 'video/mp4', 'video/webm', 'text/plain', 'application/pdf'];
                if (!allowedTypes.includes(file.type)) {
                    alert('File type not supported. Please upload an image, video, text, or PDF file.');
                    fileInput.value = '';
                    return;
                }

                fileInfo.textContent = `File: ${file.name} (${(file.size / 1024 / 1024).toFixed(2)} MB)`;
                
                if (file.type.startsWith('image/')) {
                    const reader = new FileReader();
                    reader.onload = () => {
                        filePreview.src = reader.result;
                        filePreview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else if (file.type.startsWith('video/')) {
                    const reader = new FileReader();
                    reader.onload = () => {
                        videoPreview.src = reader.result;
                        videoPreview.style.display = 'block';
                    };
                    reader.readAsDataURL(file);
                } else {
                    fileInfo.textContent += ' (File uploaded, ready for analysis)';
                }
            }
        }

        // Stop recognition when window loses focus
        window.addEventListener('blur', () => {
            if (isRecording) {
                stopSpeechRecognition();
            }
        });

        async function checkNews() {
            const newsInput = document.getElementById('newsInput').value.trim();
            const fileInput = document.getElementById('fileInput');
            const resultSection = document.getElementById('resultSection');
            const resultText = document.getElementById('resultText');
            const confidenceBar = document.getElementById('confidenceBar');
            const loading = document.getElementById('loading');
            const history = document.getElementById('history');

            if (!newsInput && !fileInput.files[0]) {
                alert('Please enter text or upload a file to analyze');
                return;
            }

            loading.style.display = 'block';
            resultSection.style.display = 'none';
            history.style.display = 'none';

            try {
                let response;
                if (fileInput.files[0]) {
                    response = await simulateFileAnalysis(fileInput.files[0]);
                } else {
                    response = await simulateFakeNewsDetection(newsInput);
                }

                loading.style.display = 'none';
                resultSection.style.display = 'block';
                resultSection.className = 'result-section ' + 
                    (response.isFake ? 'result-fake' : 'result-real');
                resultText.textContent = response.message;
                confidenceBar.style.width = `${response.confidence}%`;

                updateHistory(newsInput || fileInput.files[0]?.name || 'File', response);
                history.style.display = analysisHistory.length > 0 ? 'block' : 'none';
            } catch (error) {
                loading.style.display = 'none';
                resultSection.style.display = 'block';
                resultSection.className = 'result-section result-fake';
                resultText.textContent = 'Error analyzing the content. Please try again.';
                confidenceBar.style.width = '0%';
            }
        }

        function simulateFakeNewsDetection(text) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const fakeKeywords = ['hoax', 'fake', 'conspiracy', 'unverified'];
                    const isFake = fakeKeywords.some(keyword => 
                        text.toLowerCase().includes(keyword)
                    );
                    const confidence = Math.floor(Math.random() * 20) + 80;

                    resolve({
                        isFake,
                        message: isFake 
                            ? 'Warning: This news appears to be potentially fake or unreliable.'
                            : 'This news appears to be reliable based on our analysis.',
                        confidence
                    });
                }, 1500);
            });
        }

        function simulateFileAnalysis(file) {
            return new Promise((resolve) => {
                setTimeout(() => {
                    const fakeKeywords = ['hoax', 'fake', 'conspiracy', 'unverified'];
                    const isFake = fakeKeywords.some(keyword => 
                        file.name.toLowerCase().includes(keyword)
                    );
                    const confidence = Math.floor(Math.random() * 20) + 80;

                    resolve({
                        isFake,
                        message: isFake 
                            ? `Warning: The file "${file.name}" appears to contain potentially fake or unreliable content.`
                            : `The file "${file.name}" appears to be reliable based on our analysis.`,
                        confidence
                    });
                }, 1500);
            });
        }

        function updateWordCount() {
            const text = document.getElementById('newsInput').value;
            const words = text.trim().split(/\s+/).filter(word => word.length > 0).length;
            document.getElementById('wordCount').textContent = `${words} words`;
            document.getElementById('resultSection').style.display = 'none';
        }

        function updateHistory(input, response) {
            const historyList = document.getElementById('historyList');
            analysisHistory.unshift({
                text: input.substring(0, 50) + (input.length > 50 ? '...' : ''),
                result: response.message,
                timestamp: new Date().toLocaleTimeString()
            });

            analysisHistory = analysisHistory.slice(0, 5);

            historyList.innerHTML = analysisHistory.map(item => `
                <div class="history-item">
                    <strong>${item.timestamp}</strong>: ${item.text}<br>
                    <span>${item.result}</span>
                </div>
            `).join('');
        }

        function clearInput() {
            document.getElementById('newsInput').value = '';
            document.getElementById('fileInput').value = '';
            document.getElementById('filePreview').style.display = 'none';
            document.getElementById('videoPreview').style.display = 'none';
            document.getElementById('fileInfo').textContent = '';
            document.getElementById('resultSection').style.display = 'none';
            updateWordCount();
            if (isRecording) {
                stopSpeechRecognition();
            }
        }
    </script>
</body>
</html>